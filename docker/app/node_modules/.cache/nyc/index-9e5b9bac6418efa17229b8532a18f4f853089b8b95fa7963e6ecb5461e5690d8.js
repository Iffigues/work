'use strict';function cov_2qofxw891q(){var path="/react/src/server/index.js";var hash="b6460ce44ed99ce408928845776768711bed09cf";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/react/src/server/index.js",statementMap:{"0":{start:{line:3,column:0},end:{line:5,column:3}},"1":{start:{line:6,column:0},end:{line:6,column:24}},"2":{start:{line:8,column:10},end:{line:8,column:23}},"3":{start:{line:10,column:11},end:{line:10,column:38}},"4":{start:{line:12,column:13},end:{line:12,column:29}},"5":{start:{line:14,column:14},end:{line:14,column:44}},"6":{start:{line:16,column:39},end:{line:16,column:93}},"7":{start:{line:18,column:15},end:{line:18,column:51}},"8":{start:{line:19,column:14},end:{line:19,column:49}},"9":{start:{line:21,column:14},end:{line:44,column:1}},"10":{start:{line:22,column:13},end:{line:22,column:24}},"11":{start:{line:23,column:13},end:{line:23,column:24}},"12":{start:{line:25,column:16},end:{line:36,column:3}},"13":{start:{line:26,column:15},end:{line:26,column:88}},"14":{start:{line:27,column:4},end:{line:35,column:7}},"15":{start:{line:28,column:6},end:{line:32,column:7}},"16":{start:{line:29,column:8},end:{line:29,column:22}},"17":{start:{line:30,column:8},end:{line:30,column:27}},"18":{start:{line:31,column:8},end:{line:31,column:51}},"19":{start:{line:33,column:6},end:{line:33,column:25}},"20":{start:{line:34,column:6},end:{line:34,column:20}},"21":{start:{line:38,column:2},end:{line:38,column:29}},"22":{start:{line:40,column:2},end:{line:43,column:5}},"23":{start:{line:41,column:4},end:{line:41,column:46}},"24":{start:{line:42,column:4},end:{line:42,column:9}},"25":{start:{line:46,column:17},end:{line:55,column:1}},"26":{start:{line:47,column:2},end:{line:54,column:5}},"27":{start:{line:48,column:4},end:{line:48,column:46}},"28":{start:{line:49,column:4},end:{line:53,column:7}},"29":{start:{line:50,column:6},end:{line:52,column:7}},"30":{start:{line:51,column:8},end:{line:51,column:48}},"31":{start:{line:58,column:16},end:{line:74,column:4}},"32":{start:{line:59,column:14},end:{line:59,column:44}},"33":{start:{line:60,column:4},end:{line:73,column:7}},"34":{start:{line:61,column:15},end:{line:61,column:40}},"35":{start:{line:62,column:17},end:{line:69,column:7}},"36":{start:{line:63,column:8},end:{line:63,column:19}},"37":{start:{line:64,column:8},end:{line:66,column:11}},"38":{start:{line:65,column:10},end:{line:65,column:22}},"39":{start:{line:67,column:8},end:{line:67,column:35}},"40":{start:{line:68,column:8},end:{line:68,column:13}},"41":{start:{line:71,column:6},end:{line:71,column:21}},"42":{start:{line:72,column:6},end:{line:72,column:30}},"43":{start:{line:75,column:2},end:{line:75,column:17}}},fnMap:{"0":{name:"_interopRequireDefault",decl:{start:{line:16,column:9},end:{line:16,column:31}},loc:{start:{line:16,column:37},end:{line:16,column:95}},line:16},"1":{name:"initApp",decl:{start:{line:21,column:23},end:{line:21,column:30}},loc:{start:{line:21,column:48},end:{line:44,column:1}},line:21},"2":{name:"handler",decl:{start:{line:25,column:25},end:{line:25,column:32}},loc:{start:{line:25,column:43},end:{line:36,column:3}},line:25},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:44},end:{line:27,column:45}},loc:{start:{line:27,column:65},end:{line:35,column:5}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:40,column:41},end:{line:40,column:42}},loc:{start:{line:40,column:53},end:{line:43,column:3}},line:40},"5":{name:"initEngine",decl:{start:{line:46,column:26},end:{line:46,column:36}},loc:{start:{line:46,column:41},end:{line:55,column:1}},line:46},"6":{name:"(anonymous_6)",decl:{start:{line:47,column:22},end:{line:47,column:23}},loc:{start:{line:47,column:40},end:{line:54,column:3}},line:47},"7":{name:"(anonymous_7)",decl:{start:{line:49,column:24},end:{line:49,column:25}},loc:{start:{line:49,column:42},end:{line:53,column:5}},line:49},"8":{name:"create",decl:{start:{line:57,column:9},end:{line:57,column:15}},loc:{start:{line:57,column:24},end:{line:76,column:1}},line:57},"9":{name:"(anonymous_9)",decl:{start:{line:58,column:28},end:{line:58,column:29}},loc:{start:{line:58,column:55},end:{line:74,column:3}},line:58},"10":{name:"(anonymous_10)",decl:{start:{line:60,column:25},end:{line:60,column:26}},loc:{start:{line:60,column:37},end:{line:73,column:5}},line:60},"11":{name:"stop",decl:{start:{line:62,column:26},end:{line:62,column:30}},loc:{start:{line:62,column:35},end:{line:69,column:7}},line:62},"12":{name:"(anonymous_12)",decl:{start:{line:64,column:18},end:{line:64,column:19}},loc:{start:{line:64,column:30},end:{line:66,column:9}},line:64}},branchMap:{"0":{loc:{start:{line:16,column:46},end:{line:16,column:92}},type:"cond-expr",locations:[{start:{line:16,column:70},end:{line:16,column:73}},{start:{line:16,column:76},end:{line:16,column:92}}],line:16},"1":{loc:{start:{line:16,column:46},end:{line:16,column:67}},type:"binary-expr",locations:[{start:{line:16,column:46},end:{line:16,column:49}},{start:{line:16,column:53},end:{line:16,column:67}}],line:16},"2":{loc:{start:{line:26,column:15},end:{line:26,column:88}},type:"cond-expr",locations:[{start:{line:26,column:42},end:{line:26,column:66}},{start:{line:26,column:69},end:{line:26,column:88}}],line:26},"3":{loc:{start:{line:28,column:6},end:{line:32,column:7}},type:"if",locations:[{start:{line:28,column:6},end:{line:32,column:7}},{start:{line:28,column:6},end:{line:32,column:7}}],line:28},"4":{loc:{start:{line:50,column:6},end:{line:52,column:7}},type:"if",locations:[{start:{line:50,column:6},end:{line:52,column:7}},{start:{line:50,column:6},end:{line:52,column:7}}],line:50}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,sources:["index.js"],names:["create","logerror","loginfo","initApp","app","params","cb","host","port","handler","req","res","file","url","fs","readFile","__dirname","err","data","writeHead","end","on","listen","initEngine","io","socket","id","action","type","emit","promise","Promise","resolve","reject","require","createServer","stop","close","unref"],mappings:";;;;;QAwCgBA,M,GAAAA,M;;AAxChB;;;;AACA;;;;;;AAEA,IAAMC,WAAW,qBAAM,cAAN,CAAjB;AAAA,IACIC,UAAU,qBAAM,aAAN,CADd;;AAGA,IAAMC,UAAU,SAAVA,OAAU,CAACC,GAAD,EAAMC,MAAN,EAAcC,EAAd,EAAqB;AAAA,MAC5BC,IAD4B,GACdF,MADc,CAC5BE,IAD4B;AAAA,MACtBC,IADsB,GACdH,MADc,CACtBG,IADsB;;AAEnC,MAAMC,UAAU,SAAVA,OAAU,CAACC,GAAD,EAAMC,GAAN,EAAc;AAC5B,QAAMC,OAAOF,IAAIG,GAAJ,KAAY,YAAZ,GAA2B,wBAA3B,GAAsD,mBAAnE;AACAC,iBAAGC,QAAH,CAAYC,YAAYJ,IAAxB,EAA8B,UAACK,GAAD,EAAMC,IAAN,EAAe;AAC3C,UAAID,GAAJ,EAAS;AACPhB,iBAASgB,GAAT;AACAN,YAAIQ,SAAJ,CAAc,GAAd;AACA,eAAOR,IAAIS,GAAJ,CAAQ,0BAAR,CAAP;AACD;AACDT,UAAIQ,SAAJ,CAAc,GAAd;AACAR,UAAIS,GAAJ,CAAQF,IAAR;AACD,KARD;AASD,GAXD;;AAaAd,MAAIiB,EAAJ,CAAO,SAAP,EAAkBZ,OAAlB;;AAEAL,MAAIkB,MAAJ,CAAW,EAACf,UAAD,EAAOC,UAAP,EAAX,EAAyB,YAAK;AAC5BN,kCAA4BG,OAAOQ,GAAnC;AACAP;AACD,GAHD;AAID,CArBD;;AAuBA,IAAMiB,aAAa,SAAbA,UAAa,KAAM;AACvBC,KAAGH,EAAH,CAAM,YAAN,EAAoB,UAASI,MAAT,EAAgB;AAClCvB,YAAQ,uBAAuBuB,OAAOC,EAAtC;AACAD,WAAOJ,EAAP,CAAU,QAAV,EAAoB,UAACM,MAAD,EAAY;AAC9B,UAAGA,OAAOC,IAAP,KAAgB,aAAnB,EAAiC;AAC/BH,eAAOI,IAAP,CAAY,QAAZ,EAAsB,EAACD,MAAM,MAAP,EAAtB;AACD;AACF,KAJD;AAKD,GAPD;AAQD,CATD;;AAWO,SAAS5B,MAAT,CAAgBK,MAAhB,EAAuB;AAC5B,MAAMyB,UAAU,IAAIC,OAAJ,CAAa,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAChD,QAAM7B,MAAM8B,QAAQ,MAAR,EAAgBC,YAAhB,EAAZ;AACAhC,YAAQC,GAAR,EAAaC,MAAb,EAAqB,YAAK;AACxB,UAAMmB,KAAKU,QAAQ,WAAR,EAAqB9B,GAArB,CAAX;AACA,UAAMgC,OAAO,SAAPA,IAAO,CAAC9B,EAAD,EAAQ;AACnBkB,WAAGa,KAAH;AACAjC,YAAIiC,KAAJ,CAAW,YAAM;AACfjC,cAAIkC,KAAJ;AACD,SAFD;AAGApC;AACAI;AACD,OAPD;;AASAiB,iBAAWC,EAAX;AACAQ,cAAQ,EAACI,UAAD,EAAR;AACD,KAbD;AAcD,GAhBe,CAAhB;AAiBA,SAAON,OAAP;AACD",file:"index.js",sourceRoot:"/react/src/server",sourcesContent:["import fs  from 'fs'\nimport debug from 'debug'\n\nconst logerror = debug('tetris:error')\n  , loginfo = debug('tetris:info')\n\nconst initApp = (app, params, cb) => {\n  const {host, port} = params\n  const handler = (req, res) => {\n    const file = req.url === '/bundle.js' ? '/../../build/bundle.js' : '/../../index.html'\n    fs.readFile(__dirname + file, (err, data) => {\n      if (err) {\n        logerror(err)\n        res.writeHead(500)\n        return res.end('Error loading index.html')\n      }\n      res.writeHead(200)\n      res.end(data)\n    })\n  }\n\n  app.on('request', handler)\n\n  app.listen({host, port}, () =>{\n    loginfo(`tetris listen on ${params.url}`)\n    cb()\n  })\n}\n\nconst initEngine = io => {\n  io.on('connection', function(socket){\n    loginfo(\"Socket connected: \" + socket.id)\n    socket.on('action', (action) => {\n      if(action.type === 'server/ping'){\n        socket.emit('action', {type: 'pong'})\n      }\n    })\n  })\n}\n\nexport function create(params){\n  const promise = new Promise( (resolve, reject) => {\n    const app = require('http').createServer()\n    initApp(app, params, () =>{\n      const io = require('socket.io')(app)\n      const stop = (cb) => {\n        io.close()\n        app.close( () => {\n          app.unref()\n        })\n        loginfo(`Engine stopped.`)\n        cb()\n      }\n\n      initEngine(io)\n      resolve({stop})\n    })\n  })\n  return promise\n}\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"b6460ce44ed99ce408928845776768711bed09cf"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2qofxw891q=function(){return actualCoverage;};}return actualCoverage;}cov_2qofxw891q();cov_2qofxw891q().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2qofxw891q().s[1]++;exports.create=create;var _fs=(cov_2qofxw891q().s[2]++,require('fs'));var _fs2=(cov_2qofxw891q().s[3]++,_interopRequireDefault(_fs));var _debug=(cov_2qofxw891q().s[4]++,require('debug'));var _debug2=(cov_2qofxw891q().s[5]++,_interopRequireDefault(_debug));function _interopRequireDefault(obj){cov_2qofxw891q().f[0]++;cov_2qofxw891q().s[6]++;return(cov_2qofxw891q().b[1][0]++,obj)&&(cov_2qofxw891q().b[1][1]++,obj.__esModule)?(cov_2qofxw891q().b[0][0]++,obj):(cov_2qofxw891q().b[0][1]++,{default:obj});}var logerror=(cov_2qofxw891q().s[7]++,(0,_debug2.default)('tetris:error')),loginfo=(cov_2qofxw891q().s[8]++,(0,_debug2.default)('tetris:info'));cov_2qofxw891q().s[9]++;var initApp=function initApp(app,params,cb){cov_2qofxw891q().f[1]++;var host=(cov_2qofxw891q().s[10]++,params.host),port=(cov_2qofxw891q().s[11]++,params.port);cov_2qofxw891q().s[12]++;var handler=function handler(req,res){cov_2qofxw891q().f[2]++;var file=(cov_2qofxw891q().s[13]++,req.url==='/bundle.js'?(cov_2qofxw891q().b[2][0]++,'/../../build/bundle.js'):(cov_2qofxw891q().b[2][1]++,'/../../index.html'));cov_2qofxw891q().s[14]++;_fs2.default.readFile(__dirname+file,function(err,data){cov_2qofxw891q().f[3]++;cov_2qofxw891q().s[15]++;if(err){cov_2qofxw891q().b[3][0]++;cov_2qofxw891q().s[16]++;logerror(err);cov_2qofxw891q().s[17]++;res.writeHead(500);cov_2qofxw891q().s[18]++;return res.end('Error loading index.html');}else{cov_2qofxw891q().b[3][1]++;}cov_2qofxw891q().s[19]++;res.writeHead(200);cov_2qofxw891q().s[20]++;res.end(data);});};cov_2qofxw891q().s[21]++;app.on('request',handler);cov_2qofxw891q().s[22]++;app.listen({host:host,port:port},function(){cov_2qofxw891q().f[4]++;cov_2qofxw891q().s[23]++;loginfo('tetris listen on '+params.url);cov_2qofxw891q().s[24]++;cb();});};cov_2qofxw891q().s[25]++;var initEngine=function initEngine(io){cov_2qofxw891q().f[5]++;cov_2qofxw891q().s[26]++;io.on('connection',function(socket){cov_2qofxw891q().f[6]++;cov_2qofxw891q().s[27]++;loginfo("Socket connected: "+socket.id);cov_2qofxw891q().s[28]++;socket.on('action',function(action){cov_2qofxw891q().f[7]++;cov_2qofxw891q().s[29]++;if(action.type==='server/ping'){cov_2qofxw891q().b[4][0]++;cov_2qofxw891q().s[30]++;socket.emit('action',{type:'pong'});}else{cov_2qofxw891q().b[4][1]++;}});});};function create(params){cov_2qofxw891q().f[8]++;var promise=(cov_2qofxw891q().s[31]++,new Promise(function(resolve,reject){cov_2qofxw891q().f[9]++;var app=(cov_2qofxw891q().s[32]++,require('http').createServer());cov_2qofxw891q().s[33]++;initApp(app,params,function(){cov_2qofxw891q().f[10]++;var io=(cov_2qofxw891q().s[34]++,require('socket.io')(app));cov_2qofxw891q().s[35]++;var stop=function stop(cb){cov_2qofxw891q().f[11]++;cov_2qofxw891q().s[36]++;io.close();cov_2qofxw891q().s[37]++;app.close(function(){cov_2qofxw891q().f[12]++;cov_2qofxw891q().s[38]++;app.unref();});cov_2qofxw891q().s[39]++;loginfo('Engine stopped.');cov_2qofxw891q().s[40]++;cb();};cov_2qofxw891q().s[41]++;initEngine(io);cov_2qofxw891q().s[42]++;resolve({stop:stop});});}));cov_2qofxw891q().s[43]++;return promise;}//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImNyZWF0ZSIsImxvZ2Vycm9yIiwibG9naW5mbyIsImluaXRBcHAiLCJhcHAiLCJwYXJhbXMiLCJjYiIsImhvc3QiLCJwb3J0IiwiaGFuZGxlciIsInJlcSIsInJlcyIsImZpbGUiLCJ1cmwiLCJmcyIsInJlYWRGaWxlIiwiX19kaXJuYW1lIiwiZXJyIiwiZGF0YSIsIndyaXRlSGVhZCIsImVuZCIsIm9uIiwibGlzdGVuIiwiaW5pdEVuZ2luZSIsImlvIiwic29ja2V0IiwiaWQiLCJhY3Rpb24iLCJ0eXBlIiwiZW1pdCIsInByb21pc2UiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsInJlcXVpcmUiLCJjcmVhdGVTZXJ2ZXIiLCJzdG9wIiwiY2xvc2UiLCJ1bnJlZiJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUF3Q2dCQSxNLEdBQUFBLE07O0FBeENoQjs7OztBQUNBOzs7Ozs7QUFFQSxJQUFNQyxXQUFXLHFCQUFNLGNBQU4sQ0FBakI7QUFBQSxJQUNJQyxVQUFVLHFCQUFNLGFBQU4sQ0FEZDs7QUFHQSxJQUFNQyxVQUFVLFNBQVZBLE9BQVUsQ0FBQ0MsR0FBRCxFQUFNQyxNQUFOLEVBQWNDLEVBQWQsRUFBcUI7QUFBQSxNQUM1QkMsSUFENEIsR0FDZEYsTUFEYyxDQUM1QkUsSUFENEI7QUFBQSxNQUN0QkMsSUFEc0IsR0FDZEgsTUFEYyxDQUN0QkcsSUFEc0I7O0FBRW5DLE1BQU1DLFVBQVUsU0FBVkEsT0FBVSxDQUFDQyxHQUFELEVBQU1DLEdBQU4sRUFBYztBQUM1QixRQUFNQyxPQUFPRixJQUFJRyxHQUFKLEtBQVksWUFBWixHQUEyQix3QkFBM0IsR0FBc0QsbUJBQW5FO0FBQ0FDLGlCQUFHQyxRQUFILENBQVlDLFlBQVlKLElBQXhCLEVBQThCLFVBQUNLLEdBQUQsRUFBTUMsSUFBTixFQUFlO0FBQzNDLFVBQUlELEdBQUosRUFBUztBQUNQaEIsaUJBQVNnQixHQUFUO0FBQ0FOLFlBQUlRLFNBQUosQ0FBYyxHQUFkO0FBQ0EsZUFBT1IsSUFBSVMsR0FBSixDQUFRLDBCQUFSLENBQVA7QUFDRDtBQUNEVCxVQUFJUSxTQUFKLENBQWMsR0FBZDtBQUNBUixVQUFJUyxHQUFKLENBQVFGLElBQVI7QUFDRCxLQVJEO0FBU0QsR0FYRDs7QUFhQWQsTUFBSWlCLEVBQUosQ0FBTyxTQUFQLEVBQWtCWixPQUFsQjs7QUFFQUwsTUFBSWtCLE1BQUosQ0FBVyxFQUFDZixVQUFELEVBQU9DLFVBQVAsRUFBWCxFQUF5QixZQUFLO0FBQzVCTixrQ0FBNEJHLE9BQU9RLEdBQW5DO0FBQ0FQO0FBQ0QsR0FIRDtBQUlELENBckJEOztBQXVCQSxJQUFNaUIsYUFBYSxTQUFiQSxVQUFhLEtBQU07QUFDdkJDLEtBQUdILEVBQUgsQ0FBTSxZQUFOLEVBQW9CLFVBQVNJLE1BQVQsRUFBZ0I7QUFDbEN2QixZQUFRLHVCQUF1QnVCLE9BQU9DLEVBQXRDO0FBQ0FELFdBQU9KLEVBQVAsQ0FBVSxRQUFWLEVBQW9CLFVBQUNNLE1BQUQsRUFBWTtBQUM5QixVQUFHQSxPQUFPQyxJQUFQLEtBQWdCLGFBQW5CLEVBQWlDO0FBQy9CSCxlQUFPSSxJQUFQLENBQVksUUFBWixFQUFzQixFQUFDRCxNQUFNLE1BQVAsRUFBdEI7QUFDRDtBQUNGLEtBSkQ7QUFLRCxHQVBEO0FBUUQsQ0FURDs7QUFXTyxTQUFTNUIsTUFBVCxDQUFnQkssTUFBaEIsRUFBdUI7QUFDNUIsTUFBTXlCLFVBQVUsSUFBSUMsT0FBSixDQUFhLFVBQUNDLE9BQUQsRUFBVUMsTUFBVixFQUFxQjtBQUNoRCxRQUFNN0IsTUFBTThCLFFBQVEsTUFBUixFQUFnQkMsWUFBaEIsRUFBWjtBQUNBaEMsWUFBUUMsR0FBUixFQUFhQyxNQUFiLEVBQXFCLFlBQUs7QUFDeEIsVUFBTW1CLEtBQUtVLFFBQVEsV0FBUixFQUFxQjlCLEdBQXJCLENBQVg7QUFDQSxVQUFNZ0MsT0FBTyxTQUFQQSxJQUFPLENBQUM5QixFQUFELEVBQVE7QUFDbkJrQixXQUFHYSxLQUFIO0FBQ0FqQyxZQUFJaUMsS0FBSixDQUFXLFlBQU07QUFDZmpDLGNBQUlrQyxLQUFKO0FBQ0QsU0FGRDtBQUdBcEM7QUFDQUk7QUFDRCxPQVBEOztBQVNBaUIsaUJBQVdDLEVBQVg7QUFDQVEsY0FBUSxFQUFDSSxVQUFELEVBQVI7QUFDRCxLQWJEO0FBY0QsR0FoQmUsQ0FBaEI7QUFpQkEsU0FBT04sT0FBUDtBQUNEIiwiZmlsZSI6ImluZGV4LmpzIiwic291cmNlUm9vdCI6Ii9yZWFjdC9zcmMvc2VydmVyIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGZzICBmcm9tICdmcydcbmltcG9ydCBkZWJ1ZyBmcm9tICdkZWJ1ZydcblxuY29uc3QgbG9nZXJyb3IgPSBkZWJ1ZygndGV0cmlzOmVycm9yJylcbiAgLCBsb2dpbmZvID0gZGVidWcoJ3RldHJpczppbmZvJylcblxuY29uc3QgaW5pdEFwcCA9IChhcHAsIHBhcmFtcywgY2IpID0+IHtcbiAgY29uc3Qge2hvc3QsIHBvcnR9ID0gcGFyYW1zXG4gIGNvbnN0IGhhbmRsZXIgPSAocmVxLCByZXMpID0+IHtcbiAgICBjb25zdCBmaWxlID0gcmVxLnVybCA9PT0gJy9idW5kbGUuanMnID8gJy8uLi8uLi9idWlsZC9idW5kbGUuanMnIDogJy8uLi8uLi9pbmRleC5odG1sJ1xuICAgIGZzLnJlYWRGaWxlKF9fZGlybmFtZSArIGZpbGUsIChlcnIsIGRhdGEpID0+IHtcbiAgICAgIGlmIChlcnIpIHtcbiAgICAgICAgbG9nZXJyb3IoZXJyKVxuICAgICAgICByZXMud3JpdGVIZWFkKDUwMClcbiAgICAgICAgcmV0dXJuIHJlcy5lbmQoJ0Vycm9yIGxvYWRpbmcgaW5kZXguaHRtbCcpXG4gICAgICB9XG4gICAgICByZXMud3JpdGVIZWFkKDIwMClcbiAgICAgIHJlcy5lbmQoZGF0YSlcbiAgICB9KVxuICB9XG5cbiAgYXBwLm9uKCdyZXF1ZXN0JywgaGFuZGxlcilcblxuICBhcHAubGlzdGVuKHtob3N0LCBwb3J0fSwgKCkgPT57XG4gICAgbG9naW5mbyhgdGV0cmlzIGxpc3RlbiBvbiAke3BhcmFtcy51cmx9YClcbiAgICBjYigpXG4gIH0pXG59XG5cbmNvbnN0IGluaXRFbmdpbmUgPSBpbyA9PiB7XG4gIGlvLm9uKCdjb25uZWN0aW9uJywgZnVuY3Rpb24oc29ja2V0KXtcbiAgICBsb2dpbmZvKFwiU29ja2V0IGNvbm5lY3RlZDogXCIgKyBzb2NrZXQuaWQpXG4gICAgc29ja2V0Lm9uKCdhY3Rpb24nLCAoYWN0aW9uKSA9PiB7XG4gICAgICBpZihhY3Rpb24udHlwZSA9PT0gJ3NlcnZlci9waW5nJyl7XG4gICAgICAgIHNvY2tldC5lbWl0KCdhY3Rpb24nLCB7dHlwZTogJ3BvbmcnfSlcbiAgICAgIH1cbiAgICB9KVxuICB9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlKHBhcmFtcyl7XG4gIGNvbnN0IHByb21pc2UgPSBuZXcgUHJvbWlzZSggKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgIGNvbnN0IGFwcCA9IHJlcXVpcmUoJ2h0dHAnKS5jcmVhdGVTZXJ2ZXIoKVxuICAgIGluaXRBcHAoYXBwLCBwYXJhbXMsICgpID0+e1xuICAgICAgY29uc3QgaW8gPSByZXF1aXJlKCdzb2NrZXQuaW8nKShhcHApXG4gICAgICBjb25zdCBzdG9wID0gKGNiKSA9PiB7XG4gICAgICAgIGlvLmNsb3NlKClcbiAgICAgICAgYXBwLmNsb3NlKCAoKSA9PiB7XG4gICAgICAgICAgYXBwLnVucmVmKClcbiAgICAgICAgfSlcbiAgICAgICAgbG9naW5mbyhgRW5naW5lIHN0b3BwZWQuYClcbiAgICAgICAgY2IoKVxuICAgICAgfVxuXG4gICAgICBpbml0RW5naW5lKGlvKVxuICAgICAgcmVzb2x2ZSh7c3RvcH0pXG4gICAgfSlcbiAgfSlcbiAgcmV0dXJuIHByb21pc2Vcbn1cbiJdfQ==
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZGV4LmpzIl0sIm5hbWVzIjpbImxvZ2Vycm9yIiwibG9naW5mbyIsImluaXRBcHAiLCJob3N0IiwicG9ydCIsInBhcmFtcyIsImhhbmRsZXIiLCJmaWxlIiwicmVxIiwiZnMiLCJfX2Rpcm5hbWUiLCJyZXMiLCJhcHAiLCJjYiIsImluaXRFbmdpbmUiLCJpbyIsInNvY2tldCIsImFjdGlvbiIsInR5cGUiLCJjcmVhdGUiLCJwcm9taXNlIiwicmVxdWlyZSIsInN0b3AiLCJyZXNvbHZlIl0sIm1hcHBpbmdzIjoiOzRNQXdDZ0JtQixNLENBQUFBLE0sQ0F4Q2hCLEdBQUEsQ0FBQSxHQUFBLDBCQUFBLE9BQUEsQ0FBQSxJQUFBLENBQUEsQ0FBQSxDLCtEQUNBLEdBQUEsQ0FBQSxNQUFBLDBCQUFBLE9BQUEsQ0FBQSxPQUFBLENBQUEsQ0FBQSxDLDJUQUVBLEdBQU1uQixDQUFBQSxRQUFBQSwwQkFBVyxDQUFBLEVBQUEsT0FBQSxDQUFBLE9BQUEsRUFBakIsY0FBaUIsQ0FBWEEsQ0FBTixDQUNJQyxPQUFBQSwwQkFBVSxDQUFBLEVBQUEsT0FBQSxDQUFBLE9BQUEsRUFEZCxhQUNjLENBQVZBLENBREosQyx3QkFHQSxHQUFNQyxDQUFBQSxPQUFBQSxDQUFVLFFBQVZBLENBQUFBLE9BQVUsQ0FBQSxHQUFBLENBQUEsTUFBQSxDQUFBLEVBQUEsQ0FBcUIseUJBQUEsR0FDNUJDLENBQUFBLElBRDRCLDJCQUNkRSxNQURjLENBQUEsSUFBQSxDQUFBLENBQ3RCRCxJQURzQiwyQkFDZEMsTUFEYyxDQUFBLElBQUEsQ0FBQSxDQUFBLHlCQUVuQyxHQUFNQyxDQUFBQSxPQUFBQSxDQUFVLFFBQVZBLENBQUFBLE9BQVUsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFjLHlCQUM1QixHQUFNQyxDQUFBQSxJQUFBQSwyQkFBT0MsR0FBQUEsQ0FBQUEsR0FBQUEsR0FBQUEsWUFBQUEsNkJBQUFBLHdCQUFBQSw4QkFBYixtQkFBYUEsQ0FBUEQsQ0FBTixDQUQ0Qix5QkFFNUJFLElB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J1xuaW1wb3J0IGRlYnVnIGZyb20gJ2RlYnVnJ1xuXG5jb25zdCBsb2dlcnJvciA9IGRlYnVnKCd0ZXRyaXM6ZXJyb3InKVxuICAsIGxvZ2luZm8gPSBkZWJ1ZygndGV0cmlzOmluZm8nKVxuXG5jb25zdCBpbml0QXBwID0gKGFwcCwgcGFyYW1zLCBjYikgPT4ge1xuICBjb25zdCB7aG9zdCwgcG9ydH0gPSBwYXJhbXNcbiAgY29uc3QgaGFuZGxlciA9IChyZXEsIHJlcykgPT4ge1xuICAgIGNvbnN0IGZpbGUgPSByZXEudXJsID09PSAnL2J1bmRsZS5qcycgPyAnLy4uLy4uL2J1aWxkL2J1bmRsZS5qcycgOiAnLy4uLy4uL2luZGV4Lmh0bWwnXG4gICAgZnMucmVhZEZpbGUoX19kaXJuYW1lICsgZmlsZSwgKGVyciwgZGF0YSkgPT4ge1xuICAgICAgaWYgKGVycikge1xuICAgICAgICBsb2dlcnJvcihlcnIpXG4gICAgICAgIHJlcy53cml0ZUhlYWQoNTAwKVxuICAgICAgICByZXR1cm4gcmVzLmVuZCgnRXJyb3IgbG9hZGluZyBpbmRleC5odG1sJylcbiAgICAgIH1cbiAgICAgIHJlcy53cml0ZUhlYWQoMjAwKVxuICAgICAgcmVzLmVuZChkYXRhKVxuICAgIH0pXG4gIH1cblxuICBhcHAub24oJ3JlcXVlc3QnLCBoYW5kbGVyKVxuXG4gIGFwcC5saXN0ZW4oe2hvc3QsIHBvcnR9LCAoKSA9PntcbiAgICBsb2dpbmZvKGB0ZXRyaXMgbGlzdGVuIG9uICR7cGFyYW1zLnVybH1gKVxuICAgIGNiKClcbiAgfSlcbn1cblxuY29uc3QgaW5pdEVuZ2luZSA9IGlvID0+IHtcbiAgaW8ub24oJ2Nvbm5lY3Rpb24nLCBmdW5jdGlvbihzb2NrZXQpe1xuICAgIGxvZ2luZm8oXCJTb2NrZXQgY29ubmVjdGVkOiBcIiArIHNvY2tldC5pZClcbiAgICBzb2NrZXQub24oJ2FjdGlvbicsIChhY3Rpb24pID0+IHtcbiAgICAgIGlmKGFjdGlvbi50eXBlID09PSAnc2VydmVyL3BpbmcnKXtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2FjdGlvbicsIHt0eXBlOiAncG9uZyd9KVxuICAgICAgfVxuICAgIH0pXG4gIH0pXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGUocGFyYW1zKXtcbiAgY29uc3QgcHJvbWlzZSA9IG5ldyBQcm9taXNlKCAocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgY29uc3QgYXBwID0gcmVxdWlyZSgnaHR0cCcpLmNyZWF0ZVNlcnZlcigpXG4gICAgaW5pdEFwcChhcHAsIHBhcmFtcywgKCkgPT57XG4gICAgICBjb25zdCBpbyA9IHJlcXVpcmUoJ3NvY2tldC5pbycpKGFwcClcbiAgICAgIGNvbnN0IHN0b3AgPSAoY2IpID0+IHtcbiAgICAgICAgaW8uY2xvc2UoKVxuICAgICAgICBhcHAuY2xvc2UoICgpID0+IHtcbiAgICAgICAgICBhcHAudW5yZWYoKVxuICAgICAgICB9KVxuICAgICAgICBsb2dpbmZvKGBFbmdpbmUgc3RvcHBlZC5gKVxuICAgICAgICBjYigpXG4gICAgICB9XG5cbiAgICAgIGluaXRFbmdpbmUoaW8pXG4gICAgICByZXNvbHZlKHtzdG9wfSlcbiAgICB9KVxuICB9KVxuICByZXR1cm4gcHJvbWlzZVxufVxuIl0sInNvdXJjZVJvb3QiOiIvcmVhY3Qvc3JjL3NlcnZlciJ9